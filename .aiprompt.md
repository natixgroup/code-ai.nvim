# Refactor 

Propose a way to factorize the askHeavy() methods in one file.
Describe the modification actions I have to do in the code in order to achieve that.
lua/ai/aiconfig.lua


# Print Gemini tokens

In `lua/ai/gemini/query.lua`, we have the `formatResult` function that prints "This is Gemini answer" 
followed by the `result` variable.

I want the used tokens to be printed as well between parentheses after the "This is Gemini answer" string.
For example, if the prompt tokens are 30000 and the answer token is 2000 the output should be:
"This is Gemini answer (30k in, 2k out)".

Gemini response body is a JSON object that I saved as `gemini-response.json`.

Propose a modified version of the `formatResult` function that achieves that,
and explain the modifications with inline comments.

# Print ChatGPT tokens

In `lua/ai/chatgpt/query.lua`, we have the `formatResult` function that prints "This is ChatGPT answer" 
followed by the `result` variable.

I want the used tokens to be printed as well between parentheses after the "This is Gemini answer" string.
For example, if the prompt tokens are 30000 and the answer token is 2000 the output should be:
"This is ChatGPT answer (30k in, 2k out)".

Gemini response body is a JSON object that I saved as `chatgpt-response.json`.

Propose a modified version of the `formatResult` function that achieves that,
and explain the modifications with inline comments.

